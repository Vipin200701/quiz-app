<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add Questions</title>
    <meta charset="UTF-8">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container mt-4">

    <!-- Header -->
    <div class="mb-4">
        <h3>Add Questions</h3>
        <p class="text-muted">
            Quiz: <strong th:text="${title}"></strong> |
            Category: <span th:text="${category}"></span> |
            Difficulty: <span th:text="${difficulty}"></span>
        </p>
    </div>

    <!-- FORM -->
    <form th:action="@{/quiz/save-questions}"
          th:object="${questionListForm}"
          method="post">

        <!-- Hidden quiz info -->
        <input type="hidden" name="title" th:value="${title}">
        <input type="hidden" name="category" th:value="${category}">
        <input type="hidden" name="difficulty" th:value="${difficulty}">

        <!-- Questions -->
        <div th:each="q, stat : *{questions}" class="card mb-4 shadow-sm p-3">

            <h5 class="mb-3">Question <span th:text="${stat.index + 1}"></span></h5>

            <!-- Question text -->
            <div class="mb-3">
                <label class="form-label">Question</label>
                <input type="text"
                       class="form-control"
                       th:field="*{questions[__${stat.index}__].questionText}"
                       required>
            </div>

            <!-- Option 1 -->
            <div class="mb-2">
                <label class="form-label">Option 1</label>
                <input type="text"
                       class="form-control"
                       th:field="*{questions[__${stat.index}__].option1}"
                       required>
            </div>

            <!-- Option 2 -->
            <div class="mb-2">
                <label class="form-label">Option 2</label>
                <input type="text"
                       class="form-control"
                       th:field="*{questions[__${stat.index}__].option2}"
                       required>
            </div>

            <!-- Option 3 -->
            <div class="mb-2">
                <label class="form-label">Option 3</label>
                <input type="text"
                       class="form-control"
                       th:field="*{questions[__${stat.index}__].option3}"
                       required>
            </div>

            <!-- Option 4 -->
            <div class="mb-3">
                <label class="form-label">Option 4</label>
                <input type="text"
                       class="form-control"
                       th:field="*{questions[__${stat.index}__].option4}"
                       required>
            </div>

            <!-- Correct Answer -->
            <div class="mb-2">
                <label class="form-label">Correct Answer</label>
                <select class="form-select"
                        th:field="*{questions[__${stat.index}__].answer}"
                        required>
                    <option value="">-- Select correct option --</option>
                    <option th:value="*{questions[__${stat.index}__].option1}">
                        Option 1
                    </option>
                    <option th:value="*{questions[__${stat.index}__].option2}">
                        Option 2
                    </option>
                    <option th:value="*{questions[__${stat.index}__].option3}">
                        Option 3
                    </option>
                    <option th:value="*{questions[__${stat.index}__].option4}">
                        Option 4
                    </option>
                </select>
            </div>

        </div>

        <!-- Submit -->
        <button type="submit" class="btn btn-primary w-100 mb-5">
            Save Questions
        </button>

    </form>
</div>

</body>
</html>
